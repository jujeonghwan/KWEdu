<form id="form_main" method="post" enctype="multipart/form-data">
<!-- 중복실행 확인 -->
<input type="hidden" id="duplication_tag" name="duplication_tag" value="N" />
<!-- 중복실행 확인 -->
                   
<div class="container">
        
    <ol class="breadcrumb">
        {menu_navigator}
    </ol>
    
    <div class="panel panel-success">
        <div class="panel-heading">담당자</div>
        <div class="panel-body">
            <div class="row form-group">
                <div class="col-md-2">
                    <span class="col-md-12 badge"><label class="control-label">이름(한글)</span></label></span>
                </div>
                <div class="col-md-4">
                    <input type="text" class="form-control input-sm" id="wu_name" name="wu_name" maxlength="50" />
                </div>
            </div>
            <div class="row form-group">
                <div class="col-md-2">
                    <span class="col-md-12 badge"><label class="control-label">First Name(영문)</span></label></span>
                </div>
                <div class="col-md-4">
                    <input type="text" class="form-control input-sm" id="wu_firstname" name="wu_firstname" maxlength="30" />
                </div>

                <div class="col-md-2">
                    <span class="col-md-12 badge"><label class="control-label">Last Name(영문)</span></label></span>
                </div>
                <div class="col-md-4">
                    <input type="text" class="form-control input-sm" id="wu_lastname" name="wu_lastname" maxlength="30" />
                </div>
            </div>
            <div class="row form-group">
                <div class="col-md-2">
                    <span class="col-md-12 badge"><label class="control-label">Preferred Name(영문)</span></label></span>
                </div>
                <div class="col-md-4">
                    <input type="text" class="form-control input-sm" id="wu_preferredname" name="wu_preferredname" maxlength="30" />
                </div>
            </div>
            
            <div class="row form-group">
                <div class="col-md-2">
                    <span class="col-md-12 badge"><label class="control-label">아이디</span></label></span>
                </div>
                <div class="col-md-3">
                    <input type="text" class="form-control input-sm" id="wu_loginid" name="wu_loginid" maxlength="20" />
                </div>
            </div>
            <div class="row form-group">
                <div class="col-md-2">
                    <span class="col-md-12 badge"><label class="control-label">비밀번호</span></label></span>
                </div>
                <div class="col-md-3">
                    <input type="password" class="form-control input-sm" id="wu_password" name="wu_password" maxlength="20" />
                </div>
                <div class="col-md-1">
                    &nbsp;
                </div>

                <div class="col-md-2">
                    <span class="col-md-12 badge"><label class="control-label">비밀번호 확인</span></label></span>
                </div>
                <div class="col-md-3">
                    <input type="password" class="form-control input-sm" id="wu_password_confirm" name="wu_password_confirm" maxlength="20" />
                </div>
                <div class="col-md-1">
                    &nbsp;
                </div>
            </div>
            
            <div class="row form-group">
                <div class="col-md-2">
                    <span class="col-md-12 badge"><label class="control-label">생년월일</span></label></span>
                </div>
                <div class="col-md-2">
                    <select class="form-control input-sm" id="wu_birthdate_year" name="wu_birthdate_year">{option_wu_birthdate_year}</select>
                </div>
                <div class="col-md-2">
                    <select class="form-control input-sm" id="wu_birthdate_month" name="wu_birthdate_month">{option_wu_birthdate_month}</select>
                </div>
                <div class="col-md-2">
                    <select class="form-control input-sm" id="wu_birthdate_day" name="wu_birthdate_day">{option_wu_birthdate_day}</select>
                </div>
            </div>
            <div class="row form-group">
                <div class="col-md-2">
                    <span class="col-md-12 badge"><label class="control-label">이메일</span></label></span>
                </div>
                <div class="col-md-3">
                    <input type="email" class="form-control input-sm" id="wu_email" name="wu_email" maxlength="50" />
                </div>
            </div>
            <div class="row form-group">
                <div class="col-md-2">
                    <span class="col-md-12 badge"><label class="control-label">성별</span></label></span>
                </div>
                <div class="col-md-4">
                    {radio_wu_gendertype}
                </div>
            </div>

            <div class="row form-group">
                <div class="col-md-2">
                    <span class="col-md-12 badge"><label class="control-label">출생국가(Country of Birth)</span></label></span>
                </div>
                <div class="col-md-3">
                    <input type="text" class="form-control input-sm" id="wu_contryofbirth" name="wu_contryofbirth" maxlength="30" />
                </div>
                <div class="col-md-1">
                    &nbsp;
                </div>

                <div class="col-md-2">
                    <span class="col-md-12 badge"><label class="control-label">국적(Country of Citizenship)</span></label></span>
                </div>
                <div class="col-md-3">
                    <input type="text" class="form-control input-sm" id="wu_contryofcitizenship" name="wu_contryofcitizenship" maxlength="30" />
                </div>
                <div class="col-md-1">
                    &nbsp;
                </div>
            </div>
            <div class="row form-group">
                <div class="col-md-2">
                    <span class="col-md-12 badge"><label class="control-label">여권번호(Passport Number)</span></label></span>
                </div>
                <div class="col-md-3">
                    <input type="text" class="form-control input-sm" id="wu_passportnumber" name="wu_passportnumber" maxlength="9" />
                </div>
                <div class="col-md-1">
                    &nbsp;
                </div>

                <div class="col-md-2">
                    <span class="col-md-12 badge"><label class="control-label">SIN넘버(SIN Number)</span></label></span>
                </div>
                <div class="col-md-3">
                    <input type="text" class="form-control input-sm" id="wu_sinnumber" name="wu_sinnumber" maxlength="9" />
                </div>
                <div class="col-md-1">
                    &nbsp;
                </div>
            </div>      
        </div>
    </div>
    
    <div class="row">
        <div class="col-md-4 text-left">
            <a class="btn btn-info" href="{login_link_href}" role="button">로그인페이지 가기</a>
        </div>
        <div class="col-md-4 text-center">
            <input type="button" class="btn btn-primary" id="button_go_join_process" value="가입완료" />
        </div>
        <div class="col-md-4 text-right"></div> 
    </div>
    
</div><!-- /container -->

</form>

<script type="text/javascript">
    
$(document).ready(function(){
    // 페이지 로드시 포커스
    $("#wu_name").focus();   
    
    // 가입완료 버튼 클릭
    $("#button_go_join_process").on("click", function() {
        go_join_process();
    });     
});
 
// 가입완료
function go_join_process() {
    if ($.trim($("#wu_name").val()) == "") {
        alert("이름(한글)을 입력하세요.");
        $("#wu_name").focus();
        return;
    }

    // 이름(한글) 중복체크
    $.ajax({   
        type: "post",
        async: false,                   // 동기 방식
        url: "ajax_workeruser_wu_name_duplication_check.php",        
        data: {
            wu_name: $.trim($("#wu_name").val())
        },       
        success: function(data) {
            if (data == "Y") {
                duplication_tag = "Y";
            }
            else {
                duplication_tag = "N";  
            }
        }  
    }); 
    
    if (duplication_tag == "Y") {
        alert("이름(한글)이 중복되었습니다.");
        $("#wu_name").focus();
        return;
    }

    if ($.trim($("#wu_firstname").val()) == "") {
        alert("First Name(영문)을 입력하세요.");
        $("#wu_firstname").focus();
        return;
    }
    if ($.trim($("#wu_lastname").val()) == "") {
        alert("Last Name(영문)을 입력하세요.");
        $("#wu_lastname").focus();
        return;
    }
    
    // 아이디
    if ($.trim($("#wu_loginid").val()) == "") {
        alert("아이디를 입력하세요.");
        $("#wu_loginid").focus();
        return;
    }
    if (!check_lowercase_number($.trim($("#wu_loginid").val()))) {
        alert("아이디를 영문소문자/숫자로 입력하세요.");
        $("#wu_loginid").focus();
        return;    
    }
    if (!check_string_length($.trim($("#wu_loginid").val()), 2, 20)) {
        alert("아이디를 2자 이상 20자 이하로 입력하세요.");
        $("#wu_loginid").focus();
        return;    
    }
    
    // 아이디 중복체크
    $.ajax({   
        type: "post",
        async: false,                   // 동기 방식
        url: "ajax_workeruser_wu_loginid_duplication_check.php",        
        data: {
            wu_loginid: $.trim($("#wu_loginid").val())
        },       
        success: function(data) {
            if (data == "Y") {
                duplication_tag = "Y";
            }
            else {
                duplication_tag = "N";  
            }
        }  
    }); 
    
    if (duplication_tag == "Y") {
        alert("아이디가 중복되었습니다.");
        $("#wu_loginid").focus();
        return;
    }

    // 비밀번호    
    if ($.trim($("#wu_password").val()) == "") {
        alert("비밀번호를 입력하세요.");
        $("#wu_password").focus();
        return;
    }
    if (!check_string_length($.trim($("#wu_password").val()), 4, 20)) {
        alert("비밀번호를 4자 이상 20자 이하로 입력하세요.");
        $("#wu_password").focus();
        return;    
    }
    
    if ($.trim($("#wu_password_confirm").val()) != $.trim($("#wu_password").val())) {
        alert("비밀번호 확인을 비밀번호와 같게 입력하세요.");
        $("#wu_password_confirm").focus();
        return;
    }
    
    // 생년월일
    if ($.trim($("#wu_birthdate_year").val()) == "") {        
        alert("생년월일(년)을 선택하세요.");
        $("#wu_birthdate_year").focus();
        return;
    } 

    if ($.trim($("#wu_birthdate_month").val()) == "") {        
        alert("생년월일(월)을 선택하세요.");
        $("#wu_birthdate_month").focus();
        return;
    } 

    if ($.trim($("#wu_birthdate_day").val()) == "") {        
        alert("생년월일(일)을 선택하세요.");
        $("#wu_birthdate_day").focus();
        return;
    } 

    if ($.trim($("#wu_email").val()) == "") {
        alert("이메일을 입력하세요.");
        $("#wu_email").focus();
        return;
    }

    if ($('input:radio[name="wu_gendertype"]').is(":checked") == false) {
        alert("성별을 선택하세요.");
        $('input:radio[name="wu_gendertype"]').first().focus();
        return;
    }


    if ($.trim($("#wu_contryofbirth").val()) == "") {
        alert("출생국가(Country of Birth)를 입력하세요.");
        $("#wu_contryofbirth").focus();
        return;
    }

    if ($.trim($("#wu_contryofcitizenship").val()) == "") {
        alert("국적(Country of Citizenship)을 입력하세요.");
        $("#wu_contryofcitizenship").focus();
        return;
    }

    // 여권번호(Passport Number)
    if ($.trim($("#wu_passportnumber").val()) == "") {
        alert("여권번호(Passport Number)를 입력하세요.");
        $("#wu_passportnumber").focus();
        return;
    }
    if (!check_uppercase_number($.trim($("#wu_passportnumber").val()))) {
        alert("여권번호(Passport Number)를 영문대문자/숫자로 입력하세요.");
        $("#wu_passportnumber").focus();
        return;    
    }
    if (!check_string_length($.trim($("#wu_passportnumber").val()), 8, 9)) {
        alert("여권번호(Passport Number)를 8자 이상 9자 이하로 입력하세요.");
        $("#wu_passportnumber").focus();
        return;    
    }

    // SIN넘버(SIN Number)
    if ($.trim($("#wu_sinnumber").val()) == "") {
        alert("SIN넘버(SIN Number)를 입력하세요.");
        $("#wu_sinnumber").focus();
        return;
    }
    if (!check_number($.trim($("#wu_sinnumber").val()))) {
        alert("SIN넘버(SIN Number)를 숫자로 입력하세요.");
        $("#wu_sinnumber").focus();
        return;    
    }
    if (!check_string_length($.trim($("#wu_sinnumber").val()), 8, 9)) {
        alert("SIN넘버(SIN Number)를 9자로 입력하세요.");
        $("#wu_sinnumber").focus();
        return;    
    }

    // 중복실행 확인
    if ($("#duplication_tag").val() == "Y") {
        alert("이미 처리중입니다.");        
        return;
    }    
    $("#duplication_tag").val("Y");
    
    // form submit
    $("#form_main").attr("target", "_self");
    $("#form_main").attr("method", "post");
    $("#form_main").attr("action", "workeruser_join_process.php");    
    $("#form_main").submit();
}

</script>